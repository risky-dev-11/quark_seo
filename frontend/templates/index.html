<!DOCTYPE html>
<html lang="de">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">

  <script id="Cookiebot" src="https://consent.cookiebot.com/uc.js" data-cbid="f311211a-2351-405a-bfcb-dd5eb74e9abb" type="text/javascript" async></script>

  <!-- Google Ads -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3157743838672635"
     crossorigin="anonymous"></script>

  <meta name="description" content="">
  <meta name="keywords" content="">

  <title>ASEOTOOL</title>
  <!-- Favicons -->
  <link href="{{ url_for('static', filename='assets/img/favicon.png') }}" rel="icon">
  <link href="{{ url_for('static', filename='assets/img/apple-touch-icon.png') }}" rel="apple-touch-icon">

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="{{ url_for('static', filename='assets/vendor/bootstrap/css/bootstrap.min.css') }}" rel="stylesheet">
  <link href="{{ url_for('static', filename='assets/vendor/bootstrap-icons/bootstrap-icons.css') }}" rel="stylesheet">
  <link href="{{ url_for('static', filename='assets/vendor/aos/aos.css') }}" rel="stylesheet">
  <link href="{{ url_for('static', filename='assets/vendor/fontawesome-free/css/all.min.css') }}" rel="stylesheet">
  <link href="{{ url_for('static', filename='assets/vendor/glightbox/css/glightbox.min.css') }}" rel="stylesheet">
  <link href="{{ url_for('static', filename='assets/vendor/swiper/swiper-bundle.min.css') }}" rel="stylesheet">

  <!-- Main CSS File -->
  <link href="{{ url_for('static', filename='assets/css/main.css') }}" rel="stylesheet">

  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-PDLXF0YFP4"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-PDLXF0YFP4');
  </script>
</head>

<body class="/-page">

  <header id="header" class="header d-flex align-items-center fixed-top">
    <div class="container-fluid container-xl position-relative d-flex align-items-center">

      <a href="/" class="logo d-flex align-items-center me-auto">
        <img src="{{ url_for('static', filename='assets/img/logo.png') }}" alt="logo">
        <h1 class="sitename">ASEOTOOL</h1>
      </a>

      <nav id="navmenu" class="navmenu">
        <ul>
            <li><a href="/" class="{% if request.endpoint == 'index' or request.endpoint == '' %}active{% endif %}">Home</a></li>
          <li><a href="{{ url_for('about') }}" class="{% if request.endpoint == 'about' %}active{% endif %}">About</a></li>
          <li><a href="{{ url_for('pricing') }}" class="{% if request.endpoint == 'pricing' %}active{% endif %}">Pricing</a></li>
          <li class="dropdown">
        <a href="#" class="{% if 'dropdown' in request.endpoint %}active{% endif %}">
          <span>Dropdown</span> <i class="bi bi-chevron-down toggle-dropdown"></i>
        </a>
        <ul>
          <li><a href="#" class="{% if request.endpoint == 'dropdown1' %}active{% endif %}">Dropdown 1</a></li>
          <li class="dropdown">
            <a href="#" class="{% if 'deep_dropdown' in request.endpoint %}active{% endif %}">
          <span>Deep Dropdown</span> <i class="bi bi-chevron-down toggle-dropdown"></i>
            </a>
            <ul>
          <li><a href="#" class="{% if request.endpoint == 'deep_dropdown2' %}active{% endif %}">Deep Dropdown 2</a></li>
            </ul>
          </li>
        </ul>
          </li>
          <li><a href="{{ url_for('contact') }}" class="{% if request.endpoint == 'contact' %}active{% endif %}">Contact</a></li>
        </ul>
        <i class="mobile-nav-toggle d-xl-none bi bi-list"></i>
      </nav>
      {% if current_user.is_authenticated %}
      <a class="btn-getstarted" href="{{ url_for('profile') }}">Hallo, {{ current_user.first_name }}!</a>
      <a class="btn-getstarted" href="{{ url_for('logout') }}" style="margin-left: 1rem;"><i class="bi bi-box-arrow-right"></i></a>
      {% else %}
      <a class="btn-getstarted" href="{{ url_for('login') }}">Anmelden </a>
      <a class="btn-getstarted" href="{{ url_for('signup') }}" style="margin-left: 1rem;">Registrieren </a>
      {% endif %}
    </div>
  </header>

  <main class="main">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r134/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vanta@latest/dist/vanta.globe.min.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", function() {
        VANTA.GLOBE({
          el: "#test",
          mouseControls: true,
          touchControls: true,
          gyroControls: false,
          minHeight: window.innerHeight,
          minWidth: window.innerWidth,
          scale: 0.50,
          scaleMobile: 1.00,
          size: 0.50,
          color: 0x0d41ff,
            color2: 0xffffff,
          backgroundColor: 0x23153c,
        });
        // Ensure position remains static
        document.getElementById("test").style.position = "static";
      });

    </script>
    <section>
      <div id="test" style="position: static !important;"></div>
    </section>
    <section style="position: relative !important; background: transparent !important; display: flex; align-items: center; justify-content: center; min-height: 80vh;">
      <div class="container">
      <div class="row gy-4">
        <div class="col-lg-6 d-flex flex-column justify-content-center">
        <form id="url-form" class="form-search d-flex align-items-stretch mb-4" data-aos="fade-up" data-aos-delay="200" style="gap: 10px;">
          <input type="text" id="url-input" class="form-control" placeholder="Enter your website URL" required style="padding: 15px; font-size: 1rem; border-radius: 5px; border: 1px solid #ccc;">
          <button type="submit" class="btn btn-primary" style="padding: 15px 30px; font-size: 1rem; border-radius: 5px;">Analyse starten</button>
        </form>
        <div class="progress" style="opacity: 0; height: 20px; border-radius: 10px; overflow: hidden; background-color: #f1f1f1;">
          <div class="progress-bar" role="progressbar" style="width: 0%; background-color: #007bff;"></div>
        </div>
        <p class="mt-4 text-center" id="progress-description" style="opacity: 0; margin-bottom: 0; font-size: 1rem; color: #555;">
          The analysis is in progress. Please wait...
        </p>
        </div>
      </div>
      
      </div>
    </section>

  <style>
    .progress.drop-in {
      animation: dropIn 0.5s ease-out forwards;
    }
    #progress-description.drop-in {
      animation: dropIn 0.5s ease-out forwards;
    }

    @keyframes dropIn {
      0% {
        transform: translateY(-20px);
        opacity: 0;
      }
      100% {
        transform: translateY(0);
        opacity: 1;
      }
    }
  </style>
  <script>
      document.getElementById('url-form').addEventListener('submit', async function(event) {
      event.preventDefault();

      const inputUrl = document.getElementById('url-input').value.trim();
      if (!inputUrl) return;

      const submitButton = document.querySelector('#url-form button[type="submit"]');
      const progressBarContainer = document.querySelector('.progress');
      const progressBar = document.querySelector('.progress-bar');
      const progressDescription = document.getElementById('progress-description');

      const setButtonState = (isLoading) => {
        submitButton.innerHTML = isLoading 
        ? '<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>' 
        : 'Analyse starten';
        submitButton.disabled = isLoading;
      };

      const resetProgressBar = () => {
        progressBarContainer.classList.remove('drop-in');
        progressBar.style.width = '0%';
        progressDescription.classList.remove('drop-in');
        progressDescription.innerHTML = 'The analysis is in progress. Please wait...';
      };

      setButtonState(true);
      progressBarContainer.classList.add('drop-in');
      progressDescription.classList.add('drop-in');

      const encodedUrl = encodeURIComponent(inputUrl);
      const evtSource = new EventSource(`/api/analyze/stream/${encodedUrl}`);

      evtSource.onmessage = function(event) {
        const [progress, message] = event.data.split('|');

        if (progress === 'DONE' || progress === 'ERROR') {
        evtSource.close();
        setButtonState(false);
        resetProgressBar();
        const resultPath = progress === 'DONE' ? message : 'error';
        window.location.href = `/results/${encodedUrl}/${resultPath}`;
        } else {
        const targetWidth = parseFloat(progress);
        let currentWidth = parseFloat(progressBar.style.width) || 0;
        
        progressDescription.innerHTML = message;

        const interval = setInterval(() => {
          currentWidth = Math.min(currentWidth + 1, targetWidth);
          progressBar.style.width = `${currentWidth}%`;
          if (currentWidth >= targetWidth) clearInterval(interval);
        }, 25);
        }
      };
      });
  </script>
</div>

  </main>

  <!-- Scroll Top -->
  <a href="#" id="scroll-top" class="scroll-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>

  <!-- Preloader -->
  <div id="preloader"></div>

  <!-- Vendor JS Files -->
  <script src="{{ url_for('static', filename='assets/vendor/bootstrap/js/bootstrap.bundle.min.js') }}"></script>
  <script src="{{ url_for('static', filename='assets/vendor/php-email-form/validate.js') }}"></script>
  <script src="{{ url_for('static', filename='assets/vendor/aos/aos.js') }}"></script>
  <script src="{{ url_for('static', filename='assets/vendor/purecounter/purecounter_vanilla.js') }}"></script>
  <script src="{{ url_for('static', filename='assets/vendor/glightbox/js/glightbox.min.js') }}"></script>
  <script src="{{ url_for('static', filename='assets/vendor/swiper/swiper-bundle.min.js') }}"></script>
  <script src="https://cdn.jsdelivr.net/npm/js-circle-progress/dist/circle-progress.min.js" type="module"></script>

  <!-- Main JS File -->
  <script src="{{ url_for('static', filename='assets/js/main.js') }}"></script>

</body>

</html>